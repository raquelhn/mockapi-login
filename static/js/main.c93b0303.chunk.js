(this["webpackJsonpfirst-app"]=this["webpackJsonpfirst-app"]||[]).push([[0],{160:function(e,t,n){},192:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(52),r=n.n(a),o=(n(160),n(79)),i=n(141),l=n(11),j=n(204),d=n(82),u=n(58),b=function(){return sessionStorage.getItem("token")||null},p=function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user")},O=n(208),h=n(205),x=n(86),g=n.n(x),v=n(6);var m=function(e){var t=Object(c.useState)(e),n=Object(u.a)(t,2),s=n[0],a=n[1];return{value:s,onChange:function(e){a(e.target.value)}}},f=function(e){var t=m(""),n=m(""),s=Object(c.useState)(null),a=Object(u.a)(s,2),r=a[0],o=a[1],i=Object(c.useState)(!1),l=Object(u.a)(i,2),j=l[0],b=l[1],p=Object(c.useState)(""),x=Object(u.a)(p,2),f=(x[0],x[1]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(O.a,{as:"h2",children:"Login"}),Object(v.jsxs)(h.a,{centered:!0,children:[Object(v.jsxs)(h.a.Field,{children:[Object(v.jsx)("label",{children:"Username"}),Object(v.jsx)("input",Object(d.a)(Object(d.a)({type:"text"},t),{},{autoComplete:"new-password"}))]}),Object(v.jsxs)(h.a.Field,{children:[Object(v.jsx)("label",{style:{marginTop:10},children:"Password"}),Object(v.jsx)("input",Object(d.a)(Object(d.a)({type:"password"},n),{},{autoComplete:"new-password"}))]}),r&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("small",{style:{color:"red"},children:r}),Object(v.jsx)("br",{})]}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"button",value:j?"Loading...":"Login",onClick:function(){o(null),b(!0),g.a.post("https://api.bybits.co.uk/auth/token",{username:t.value,password:n.value,type:"USER_PASSWORD_AUTH"},{headers:{environment:"mock"}}).then((function(t){var n,c;console.log(t),b(!1),n=t.data.access_token,c=t.data,sessionStorage.setItem("token",n),sessionStorage.setItem("user",JSON.stringify(c)),console.log(t.data),f(t.data.access_token),e.history.push("/private")})).catch((function(e){b(!1),o("Something went wrong. Please try again later.")}))},disabled:j}),Object(v.jsx)("br",{})]})]})},y=n(206);var S=function(e){var t=Object(c.useState)(!0),n=Object(u.a)(t,2),s=n[0],a=n[1];if(Object(c.useEffect)((function(){var e=b();e&&g.a.get("https://api.bybits.co.uk/policys/details",{headers:{environment:"mock",Authorization:"Bearer ".concat(e),"Content-type":"application/json"}}).then((function(e){console.log(e.data.policy),function(e){sessionStorage.setItem("data",JSON.stringify(e))}(e.data),a(!1)})).catch((function(e){p(),a(!1)}))}),[]),s&&b())return Object(v.jsx)("div",{className:"content",children:"Checking Authentication..."});var r=function(){var e=sessionStorage.getItem("user");return e?JSON.parse(e):null}(),o=function(){var e=sessionStorage.getItem("data");return e?JSON.parse(e):null}();return console.log(r),console.log(o),o?Object(v.jsx)(y.a,{centered:!0,children:Object(v.jsxs)(y.a.Content,{children:[Object(v.jsx)(y.a.Header,{color:"green",children:"Policy Reference"}),Object(v.jsxs)("p",{children:[" ",o.policy.policy_reference," "]}),Object(v.jsx)(y.a.Header,{children:"Cover Type"}),Object(v.jsx)("p",{children:o.policy.cover}),Object(v.jsx)(y.a.Header,{children:"Car"}),Object(v.jsxs)("p",{children:[o.vehicle.make," ",o.vehicle.model," ",o.vehicle.model," ",o.vehicle.reg]}),Object(v.jsx)(y.a.Header,{children:"Address"}),Object(v.jsxs)("p",{children:[o.policy.address.line_1," ",o.policy.address.line_3," ",o.policy.address.postcode]}),Object(v.jsx)("input",{type:"button",onClick:function(){p(),e.history.push("/")},value:"Logout"})]})}):Object(v.jsx)("div",{className:"content",children:"Checking Authentication..."})};var k=function(){var e;return Object(v.jsx)("div",{className:"wrapper",children:Object(v.jsx)(j.a,{children:Object(v.jsxs)(i.a,{children:[Object(v.jsx)(l.a,(e={exact:!0,path:"/"},Object(o.a)(e,"exact",!0),Object(o.a)(e,"component",f),e)),Object(v.jsx)(l.a,{path:"/private",exact:!0,component:S})]})})})};n(191);r.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(k,{})}),document.getElementById("root"))}},[[192,1,2]]]);
//# sourceMappingURL=main.c93b0303.chunk.js.map