{"version":3,"sources":["utils/Common.js","components/Login.js","components/Content.js","App.js","index.js"],"names":["getToken","sessionStorage","getItem","removeUserSession","removeItem","useFormInput","initialValue","useState","value","setValue","onChange","e","target","Login","props","username","password","error","setError","loading","setLoading","setUserToken","Header","as","Form","centered","Field","type","autoComplete","style","marginTop","color","onClick","axios","post","headers","environment","then","response","token","user","console","log","data","access_token","setItem","JSON","stringify","history","push","catch","disabled","Content","authLoading","setAuthLoading","useEffect","get","Authorization","policy","setPolicySession","className","userStr","parse","getUser","dataStr","getPolicyData","Card","policy_reference","cover","vehicle","make","model","reg","address","line_1","line_3","postcode","App","Container","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c93b0303.chunk.js","sourcesContent":["//why session storage\n// return the user data from the session storage\nexport const getUser = () => {\n    const userStr = sessionStorage.getItem('user');\n    if (userStr) return JSON.parse(userStr);\n    else return null;\n  }\n\nexport const getPolicyData = () => {\n    const dataStr = sessionStorage.getItem('data');\n    if (dataStr) return JSON.parse(dataStr);\n    else return null;\n  }\n   \n  // return the token from the session storage\n  export const getToken = () => {\n    return sessionStorage.getItem('token') || null;\n  }\n\n  \n   \n  // remove the token and user from the session storage\n  export const removeUserSession = () => {\n    sessionStorage.removeItem('token');\n    sessionStorage.removeItem('user');\n  }\n\n  export const removePolicySession = () => {\n    sessionStorage.removeItem('data');\n  }\n   \n  // set the token and user from the session storage\n  export const setUserSession = (token, user) => {\n    sessionStorage.setItem('token', token);\n    sessionStorage.setItem('user', JSON.stringify(user));\n  }\n\n  export const setPolicySession = (data) => {\n    sessionStorage.setItem('data', JSON.stringify(data));\n  }","import React, { useState } from 'react';\nimport { setUserSession } from '../utils/Common';\nimport { Form, Container,Header } from 'semantic-ui-react'\nimport axios from 'axios';\n\n \nfunction Login(props) {\n  const username = useFormInput('');\n  const password = useFormInput('');\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [userToken, setUserToken] = useState(\"\");\n \n  // handle button click of login form\n  const handleLogin = () => {\n    setError(null);\n    setLoading(true);\n    axios.post('https://api.bybits.co.uk/auth/token', \n    { username: username.value, password: password.value, type:\"USER_PASSWORD_AUTH\" },\n    {headers:\n      {environment: 'mock'}\n    }).then(response => {\n      console.log(response)\n      setLoading(false);\n      setUserSession(response.data.access_token, response.data);\n      console.log(response.data)\n      setUserToken(response.data.access_token);\n      //console.log(response.data.access_token);\n      //its sending the props to private\n      props.history.push('/private');\n    }).catch(error => {\n      setLoading(false);\n      setError(\"Something went wrong. Please try again later.\");\n    });\n  }\n \n  return (\n    <>\n    <Header as='h2'>Login</Header>\n    <Form centered>\n      <Form.Field>\n        <label>Username</label>\n        <input type=\"text\" {...username} autoComplete=\"new-password\" />\n      </Form.Field>\n      <Form.Field>\n        <label style={{ marginTop: 10 }}>\n        Password\n        </label>\n        <input type=\"password\" {...password} autoComplete=\"new-password\" />\n      </Form.Field>\n      {error && <><small style={{ color: 'red' }}>{error}</small><br /></>}<br />\n      <input type=\"button\" value={loading ? 'Loading...' : 'Login'} onClick={handleLogin} disabled={loading} /><br />\n      \n    </Form>\n    </>\n  );\n}\n \nconst useFormInput = initialValue => {\n  const [value, setValue] = useState(initialValue);\n \n  const handleChange = e => {\n    setValue(e.target.value);\n  }\n  return {\n    value,\n    onChange: handleChange\n  }\n}\n \nexport default Login;","import React, { useState, useEffect } from 'react';\nimport {getToken, getUser, removeUserSession, getPolicyData, removePolicySession,setPolicySession} from '../utils/Common';\nimport { Card,  Form} from 'semantic-ui-react'\n \nimport axios from 'axios';\n\nfunction Content(props) {\n  const [authLoading, setAuthLoading] = useState(true);\n\n  useEffect(() => {\n    const token = getToken();\n    if (!token) {\n      return;\n    }\n \n    axios.get(`https://api.bybits.co.uk/policys/details`,\n    {headers:\n      {environment: 'mock',Authorization:`Bearer ${token}`,'Content-type':'application/json'}\n    }).then(response => {\n      console.log(response.data.policy)\n      setPolicySession(response.data)\n      setAuthLoading(false);\n    }).catch(error => {\n      removeUserSession();\n      setAuthLoading(false);\n    });\n  }, []);\n \n  if (authLoading && getToken()) {\n    return <div className=\"content\">Checking Authentication...</div>\n  }\n\n  const user = getUser();\n  const data=getPolicyData();\n  console.log(user)\n  console.log(data)\n  // handle click event of logout button\n  const handleLogout = () => {\n    removeUserSession();\n    props.history.push('/');\n  }\n\n  if (!data) {\n    return <div className=\"content\">Checking Authentication...</div>\n  } return (\n   \n    <Card centered> \n      <Card.Content>\n    \n     \n      <Card.Header color='green'>Policy Reference</Card.Header>\n      <p> {data.policy.policy_reference} </p>\n      \n      <Card.Header>Cover Type</Card.Header>\n \n      <p>{data.policy.cover}</p>\n    \n      <Card.Header>Car</Card.Header>\n      <p>{data.vehicle.make} {data.vehicle.model} {data.vehicle.model} {data.vehicle.reg}</p>\n      <Card.Header>Address</Card.Header>\n      <p>{data.policy.address.line_1} {data.policy.address.line_3} {data.policy.address.postcode}</p>\n\n      <input type=\"button\" onClick={handleLogout} value=\"Logout\" />\n      </Card.Content>\n    </Card>\n    \n  );\n}\n \nexport default Content;","import React, { useState} from 'react';\nimport { BrowserRouter, Switch, Route, NavLink } from 'react-router-dom';\nimport {Container } from 'semantic-ui-react'\nimport Login from './components/Login';\nimport Content from './components/Content';\n\n\nfunction App() {\n\n  \n \n  \n  return (\n    <div className=\"wrapper\">\n    <Container>\n      <BrowserRouter>\n             <Route exact path='/' exact={true} component={Login}/>\n             <Route path='/private' exact={true} component={Content}/>\n      </BrowserRouter>\n    </Container>\n    </div>\n  );\n}\n \nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'semantic-ui-css/semantic.min.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}